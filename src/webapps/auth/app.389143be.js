webpackJsonp([1],{0:function(e,t,n){n("+prg"),e.exports=n("lVK7")},"4nUu":function(e,t,n){"use strict";n.d(t,"a",function(){return u});var a=n("GiK3"),r=n.n(a);n("F8kA");var o=r.a.createElement("span",{className:"icon is-small is-left"},r.a.createElement("i",{className:"fas fa-user"})),s=r.a.createElement("span",{className:"icon is-small is-left"},r.a.createElement("i",{className:"fas fa-lock"})),i=r.a.createElement("span",{className:"icon is-small is-left"},r.a.createElement("i",{className:"fas fa-envelope"})),c=r.a.createElement("span",{className:"icon is-small is-left"},r.a.createElement("i",{className:"fas fa-calendar"})),l=r.a.createElement("span",{className:"required"},"required"),u=function(e){function t(n){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);var a=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,e.call(this,n));return a.state={value:""},a.handleChange=a.handleChange.bind(a),a}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,e),t.prototype.handleChange=function(e){this.setState({value:e.target.value}),this.props.onChange&&this.props.onChange(e)},t.prototype.getValue=function(){return this.state.value},t.prototype.render=function(){var e="",t="control has-icons-left";"user"===this.props.type?e=o:"password"===this.props.type?e=s:"email"===this.props.type?e=i:"date"===this.props.type?e=c:t="control";var n="user"===this.props.type?"text":this.props.type,a=this.props.required?l:"";return r.a.createElement("div",{className:"field"},r.a.createElement("label",{className:"label"},this.props.placeholder,a),r.a.createElement("div",{className:t},r.a.createElement("input",{className:"input",required:this.props.required,value:this.state.value,type:n,onChange:this.handleChange}),e))},t}(a.Component)},"7G9g":function(e,t,n){"use strict";n.d(t,"a",function(){return b});var a=n("GiK3"),r=n.n(a),o=n("F8kA"),s=n("NR7O"),i=n("Ojd4"),c=n("D9cT");var l=r.a.createElement(o.c,{to:"/signin"}),u=r.a.createElement("h2",null,"edPlayground"),p=r.a.createElement("div",{className:"links"},r.a.createElement("a",{className:"ed-link",href:"/"},"Home"),r.a.createElement("a",{className:"ed-link",href:"/discover"},"Discover"),r.a.createElement("a",{className:"ed-link",href:"/learn"},"Learn")),f=r.a.createElement("i",{class:"fas fa-user"}),m=r.a.createElement("p",{className:"name"},"Name"),d=r.a.createElement("p",{className:"name"},"Mail"),h=r.a.createElement("p",{className:"name"},"Birth"),g=r.a.createElement("p",{className:"name"},"Since"),y=r.a.createElement("button",{className:"ed-link"},"Sign Out"),b=function(e){function t(n){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);var a=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,e.call(this,n));return a.getUser=function(){var e=s.a.getCredentials()._id;return i.a.get("users/"+e).then(function(e){if(!e.error)return e;s.a.doLogin()})},a.state={authenticated:s.a.hasCredentials(),username:s.a.getUsername(),loading:!0,name:"...",mail:"...",birth:"...",since:"..."},a.signOut=a.signOut.bind(a),a.getUser().then(function(e){return a.setState({loading:!1,name:e.name,mail:e.mail,birth:new Date(e.birth).toLocaleDateString(),since:new Date(e.since).toLocaleDateString()})}),a}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,e),t.prototype.signOut=function(e){s.a.deleteCredentials(),this.setState({authenticated:!1}),e.preventDefault()},t.prototype.render=function(){return this.state.authenticated?r.a.createElement("div",{className:"section"},r.a.createElement("div",{className:"container"},r.a.createElement("div",{className:"column is-6 is-offset-3"},u,p,r.a.createElement("form",{className:"form-box boxi",onSubmit:this.signOut},r.a.createElement(c.a,{active:this.state.loading}),r.a.createElement("h3",null,f,"Â ",this.state.username),r.a.createElement("div",{className:"property"},m,r.a.createElement("p",{className:"value"},this.state.name)),r.a.createElement("div",{className:"property"},d,r.a.createElement("p",{className:"value"},this.state.mail)),r.a.createElement("div",{className:"property"},h,r.a.createElement("p",{className:"value"},this.state.birth)),r.a.createElement("div",{className:"property"},g,r.a.createElement("p",{className:"value"},this.state.since)),y)))):l},t}(a.Component)},D9cT:function(e,t,n){"use strict";n.d(t,"a",function(){return i});var a=n("GiK3"),r=n.n(a),o=n("ozrF");n.n(o);var s=r.a.createElement("div",{className:"loading"},r.a.createElement("div",null)),i=function(e){function t(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,e.apply(this,arguments))}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,e),t.prototype.render=function(){return this.props.active?s:""},t}(a.Component)},NR7O:function(e,t,n){"use strict";n.d(t,"a",function(){return a});var a=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e)}return e.saveCredentials=function(e,t,n){window.localStorage.setItem("auth",JSON.stringify({token:e,username:t,_id:n}))},e.getCredentials=function(){return JSON.parse(window.localStorage.getItem("auth"))},e.hasCredentials=function(){return null!==window.localStorage.getItem("auth")},e.deleteCredentials=function(){window.localStorage.removeItem("auth")},e.getUsername=function(){return this.hasCredentials()?this.getCredentials().username:"Stranger"},e.doLogin=function(){this.deleteCredentials(),window.location.href="/auth"},e}()},Ojd4:function(e,t,n){"use strict";n.d(t,"a",function(){return o});var a=n("QmSG"),r=n("NR7O");var o=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e)}return e.post=function(e,t){return fetch(a.a.api+"/"+e,{method:"post",headers:{"Content-Type":"application/x-www-form-urlencoded"},body:t}).then(function(e){return 400===e.status?e.json().then(function(e){return{error:e}}):e.json()})},e.get=function(e){var t=r.a.getCredentials().token;return fetch(a.a.api+"/"+e,{method:"GET",headers:{"x-access-token":t}}).then(function(e){return e.status>=400?e.json().then(function(e){return{error:e}}):e.json()})},e}()},QmSG:function(e,t,n){"use strict";t.a={api:"http://localhost:8080/api"}},cilB:function(e,t){},d4G2:function(e,t,n){"use strict";n.d(t,"a",function(){return g});var a=n("GiK3"),r=n.n(a),o=n("F8kA"),s=n("4nUu"),i=n("D9cT"),c=n("NR7O"),l=n("Ojd4");var u=r.a.createElement(o.c,{to:"/profile"}),p=r.a.createElement("div",{className:"notification is-primary"},"Registration Completed!"),f=r.a.createElement("div",{className:"error"},"Invalid username or password"),m=r.a.createElement("h2",null,"edPlayground"),d=r.a.createElement("button",{className:"ed-link"},"Sign In"),h=r.a.createElement("div",{className:"links"},r.a.createElement(o.b,{className:"ed-link",to:"/signup"},"I don't have an account")),g=function(e){function t(n){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);var a=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,e.call(this,n));a.inputChanged=function(){return a.setState({failed:!1})},a.handleSubmit=function(e){e.preventDefault();var t=new URLSearchParams;t.set("username",a.username.getValue()),t.set("password",a.password.getValue()),a.setState({loading:!0}),l.a.post("authenticate",t).then(function(e){if(e.error)throw e.error;c.a.saveCredentials(e.token,e.username,e._id),a.state.redirect?window.location.href=a.state.redirect:a.setState({authenticated:!0,loading:!1})}).catch(function(e){a.setState({failed:!0,loading:!1})})};var r=void 0;return n.location.search.includes("?redirect=")&&(r=n.location.search.replace("?redirect=","")),a.state={loading:!1,failed:!1,authenticated:c.a.hasCredentials(),redirect:r,justSignedUp:"?just_signed_up"===n.location.search},a.handleSubmit=a.handleSubmit.bind(a),a.inputChanged=a.inputChanged.bind(a),a}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,e),t.prototype.render=function(){var e=this;if(this.state.authenticated)return u;var t="";this.state.justSignedUp&&(t=p);var n="";return this.state.failed&&(n=f),r.a.createElement("div",{className:"section"},r.a.createElement("div",{className:"container"},r.a.createElement("div",{className:"column is-4 is-offset-4"},m,t,r.a.createElement("form",{className:"form-box boxi",onSubmit:this.handleSubmit},r.a.createElement(i.a,{active:this.state.loading}),r.a.createElement(s.a,{type:"user",placeholder:"Username",required:"true",onChange:this.inputChanged,ref:function(t){e.username=t}}),r.a.createElement(s.a,{type:"password",placeholder:"Password",required:"true",onChange:this.inputChanged,ref:function(t){e.password=t}}),n,d),h)))},t}(a.Component)},lVK7:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var a=n("GK12"),r=(n.n(a),n("cilB")),o=(n.n(r),n("GiK3")),s=n.n(o),i=n("O27J"),c=(n.n(i),n("pnOm"));Object(i.render)(s.a.createElement(c.a,null),document.querySelector("#app"))},ozrF:function(e,t){},pnOm:function(e,t,n){"use strict";var a=n("GiK3"),r=n.n(a),o=n("F8kA"),s=n("d4G2"),i=n("rPFT"),c=n("7G9g");var l=r.a.createElement(o.a,{basename:"/learn"},r.a.createElement(o.e,null,r.a.createElement(o.d,{path:"/signin",component:s.a}),r.a.createElement(o.d,{path:"/signup",component:i.a}),r.a.createElement(o.d,{path:"/profile",component:c.a}),r.a.createElement(o.c,{to:"/signin"}))),u=function(e){function t(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,e.apply(this,arguments))}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,e),t.prototype.render=function(){return l},t}(a.Component);t.a=u},rPFT:function(e,t,n){"use strict";n.d(t,"a",function(){return h});var a=n("GiK3"),r=n.n(a),o=n("F8kA"),s=n("NR7O"),i=n("Ojd4"),c=n("4nUu"),l=n("D9cT");var u=r.a.createElement(o.c,{to:"/signin?just_signed_up"}),p=r.a.createElement(o.c,{to:"/signedin"}),f=r.a.createElement("h2",null,"edPlayground"),m=r.a.createElement("button",{className:"ed-link"},"Sign Up"),d=r.a.createElement("div",{className:"links"},r.a.createElement(o.b,{className:"ed-link",to:"/signin"},"I already have an account")),h=function(e){function t(n){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);var a=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,e.call(this,n));return a.state={done:!1,loading:!1,failed:!1,error:"",authenticated:s.a.hasCredentials()},a.handleSubmit=a.handleSubmit.bind(a),a.onRepeatPasswordChange=a.onRepeatPasswordChange.bind(a),a}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,e),t.prototype.handleSubmit=function(e){var t=this;e.preventDefault();var n=new URLSearchParams;n.set("username",this.username.getValue()),n.set("password",this.password.getValue()),n.set("name",this.name.getValue()),n.set("surname",this.surname.getValue()),n.set("mail",this.mail.getValue()),n.set("birth",this.birth.getValue()),this.setState({loading:!0}),i.a.post("users",n).then(function(e){if(e.error)throw e.error;t.setState({done:!0})}).catch(function(e){t.setState({failed:!0,loading:!1,error:e.code&&11e3===e.code?t.username.getValue()+" is taken, sorry":"Something went wrong :("}),console.log(e)})},t.prototype.onPasswordChange=function(e){e.target.value.length<8?e.target.setCustomValidity("Passwords must be at least 8 characters long"):e.target.setCustomValidity("")},t.prototype.onRepeatPasswordChange=function(e){e.target.value!==this.password.getValue()?e.target.setCustomValidity("Passwords don't match"):e.target.setCustomValidity("")},t.prototype.render=function(){var e=this;if(this.state.done)return u;if(this.state.authenticated)return p;var t="";return this.state.failed&&(t=r.a.createElement("div",{className:"error"},this.state.error)),r.a.createElement("div",{className:"section"},r.a.createElement("div",{className:"container"},r.a.createElement("div",{className:"column is-6 is-offset-3"},f,r.a.createElement("form",{className:"form-box boxi",onSubmit:this.handleSubmit},r.a.createElement(l.a,{active:this.state.loading}),r.a.createElement(c.a,{type:"user",placeholder:"Username",required:"true",ref:function(t){e.username=t}}),r.a.createElement(c.a,{type:"password",placeholder:"Password",required:"true",onChange:this.onPasswordChange,ref:function(t){e.password=t}}),r.a.createElement(c.a,{type:"password",placeholder:"Repeat password",required:"true",onChange:this.onRepeatPasswordChange,ref:function(t){e.repeatPassword=t}}),r.a.createElement(c.a,{type:"text",placeholder:"Name",required:"true",ref:function(t){e.name=t}}),r.a.createElement(c.a,{type:"text",placeholder:"Surname",ref:function(t){e.surname=t}}),r.a.createElement(c.a,{type:"email",placeholder:"Mail",required:"true",ref:function(t){e.mail=t}}),r.a.createElement(c.a,{type:"date",placeholder:"Birth Date",required:"true",ref:function(t){e.birth=t}}),t,m),d)))},t}(a.Component)}},[0]);
//# sourceMappingURL=app.389143be.js.map